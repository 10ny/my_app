<% provide(:title, "マイページ") %>

<div class="container mypage">
  <div class="container">
    <div class="row">
      <div class="col-3">
        <% if @user.image.attached? %>
          <%= image_tag @user.image.variant(:display), class: "user-image", width: "100%" %>
        <% else %>
          <%= image_tag("default_user.png", width: "100%" ) %> <%# 登録画像がない場合はデフォルトを表示 %>
        <% end %>
      </div>
      <div class="col-9">
        <h2><%= @user.nickname %></h2>
        <div><%= render "shared/stats" %></div>
        <div><%= render 'follow_form' if logged_in? %></div>
      </div>
    </div>
  </div>

  <div class="container center row">
    <div class="col">
      <% if @user.beansposts.any? %>
        <h3>マメモ (<%= @user.beansposts.count %>)</h3>
        <ol class="beansposts">
          <%= render @beansposts %>
        </ol>
        <%= paginate @beansposts %>
      <% end %>
    </div>
  </div>

  <% if current_user?(@user) %>
  <div class="container row justify-content-evenly">
    <%= link_to "アカウント編集", edit_user_path(@user), class: "btn btn-info col-5" %>
    <%= link_to "アカウント削除", @user, class: "btn btn-danger col-5", data: { "turbo-method": :delete, turbo_confirm: "削除しますか?" } %>
  </div>
  <% end %>
</div>